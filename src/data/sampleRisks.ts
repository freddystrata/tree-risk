import { RiskItem } from '@/types/risk';
import { createRiskItem } from '@/utils/riskCalculations';

function generateId(): string {
  return Math.random().toString(36).substr(2, 9);
}

const sampleRiskData: Partial<RiskItem>[] = [
  // ROOT CAUSES - Layer 1
  {
    id: "ambiguous-interconnection-agreement",
    description: "Ambiguous Interconnection Agreement",
    probability: 3,
    impact: 3,
    mitigationEffectiveness: 0.6,
    owner: "Legal Team",
    category: "Legal",
    project: "Solar Panel Procurement Q1 2024",
    status: 'Open' as const,
    notes: "Legal review in progress, seeking clarification from utility company",
    comments: "Agreement terms need clarification to avoid delays",
    causes: [],
    effects: ["delayed-interconnection-approval"],
    rootCause: true,
    dollarEffectPerUnit: 5000, // $5K per day of delay
    exposureUnits: 30, // 30 days potential delay
    exposureUnitType: "days",
    riskType: 'root_cause' as const,
    highPriority: false,
    projectType: 'Schedule',
    dollarImpact: 150000,
    impactType: 'per_day',
  },
  {
    id: "inexperienced-subcontractor",
    description: "Inexperienced Subcontractor",
    probability: 4,
    impact: 3,
    mitigationEffectiveness: 0.7,
    owner: "Construction Manager",
    category: "Human Resources",
    project: "Solar Panel Procurement Q1 2024",
    status: 'In Progress' as const,
    notes: "Additional training provided, senior oversight assigned",
    comments: "New subcontractor requires additional supervision",
    causes: [],
    effects: ["delayed-interconnection-approval"],
    rootCause: true,
    dollarEffectPerUnit: 8000, // $8K per day of delay
    exposureUnits: 15, // 15 days potential delay
    exposureUnitType: "days",
    riskType: 'root_cause' as const,
    highPriority: false,
    projectType: 'Schedule',
    dollarImpact: 150000,
    impactType: 'per_day',
  },
  {
    id: "vendor-communication-issues",
    description: "Vendor Communication Issues",
    probability: 3,
    impact: 2,
    mitigationEffectiveness: 0.8,
    owner: "Procurement Manager",
    category: "Communication",
    project: "Solar Panel Procurement Q1 2024",
    status: 'Open' as const,
    notes: "Weekly vendor calls established, technical specifications documented",
    comments: "Poor communication leading to specification misunderstandings",
    causes: [],
    effects: ["delayed-interconnection-approval"],
    rootCause: true,
    dollarEffectPerUnit: 3000, // $3K per day of delay
    exposureUnits: 10, // 10 days potential delay
    exposureUnitType: "days",
    riskType: 'root_cause' as const,
    highPriority: false,
    projectType: 'Schedule',
    dollarImpact: 150000,
    impactType: 'per_day',
  },
  {
    id: "late-permit-from-county",
    description: "Late Permit from County",
    probability: 4,
    impact: 4,
    mitigationEffectiveness: 0.4,
    owner: "Project Manager",
    category: "Regulatory",
    project: "Solar Panel Procurement Q1 2024",
    status: 'Open' as const,
    notes: "Following up with county office weekly",
    comments: "Permit approval process taking longer than expected",
    causes: [],
    effects: ["delayed-final-inspection"],
    rootCause: true,
    dollarEffectPerUnit: 12000, // $12K per day of delay
    exposureUnits: 20, // 20 days potential delay
    exposureUnitType: "days",
    riskType: 'root_cause' as const,
    highPriority: false,
    projectType: 'Schedule',
    dollarImpact: 150000,
    impactType: 'per_day',
  },
  {
    id: "change-order-not-approved",
    description: "Change Order Not Approved",
    probability: 3,
    impact: 3,
    mitigationEffectiveness: 0.5,
    owner: "Project Director",
    category: "Management",
    project: "Solar Panel Procurement Q1 2024",
    status: 'In Progress' as const,
    notes: "Working with client to expedite approval process",
    comments: "Change order approval bottleneck affecting timeline",
    causes: [],
    effects: ["delayed-final-inspection"],
    rootCause: true,
    dollarEffectPerUnit: 7000, // $7K per day of delay
    exposureUnits: 12, // 12 days potential delay
    exposureUnitType: "days",
    riskType: 'root_cause' as const,
    highPriority: false,
    projectType: 'Schedule',
    dollarImpact: 150000,
    impactType: 'per_day',
  },
  {
    id: "missing-engineering-stamp",
    description: "Missing Engineering Stamp",
    probability: 2,
    impact: 4,
    mitigationEffectiveness: 0.6,
    owner: "Engineering Manager",
    category: "Engineering",
    project: "Solar Panel Procurement Q1 2024",
    status: 'Open' as const,
    notes: "Identified backup engineering firm for stamp",
    comments: "Primary engineer unavailable for stamp approval",
    causes: [],
    effects: ["delayed-final-inspection"],
    rootCause: true,
    dollarEffectPerUnit: 15000, // $15K per day of delay
    exposureUnits: 8, // 8 days potential delay
    exposureUnitType: "days",
    riskType: 'root_cause' as const,
    highPriority: false,
    projectType: 'Schedule',
    dollarImpact: 150000,
    impactType: 'per_day',
  },

  // INTERMEDIATE RISKS - Layer 2
  {
    id: "delayed-interconnection-approval",
    description: "Delayed Interconnection Approval",
    probability: 3,
    impact: 4,
    mitigationEffectiveness: 0.5,
    owner: "Project Manager",
    category: "Regulatory",
    project: "Solar Panel Procurement Q1 2024",
    status: 'Open' as const,
    notes: "Following up with utility company weekly",
    comments: "Approval process taking longer than expected",
    causes: ["ambiguous-interconnection-agreement", "inexperienced-subcontractor", "vendor-communication-issues"],
    effects: ["cod-delayed-5-days"],
    rootCause: false,
    dollarEffectPerUnit: 20000, // $20K per day of delay
    exposureUnits: 5, // 5 days delay
    exposureUnitType: "days",
    riskType: 'intermediate' as const,
    highPriority: false,
    projectType: 'Schedule',
    dollarImpact: 150000,
    impactType: 'per_day',
  },
  {
    id: "delayed-final-inspection",
    description: "Delayed Final Inspection",
    probability: 4,
    impact: 3,
    mitigationEffectiveness: 0.4,
    owner: "Quality Manager",
    category: "Quality",
    project: "Solar Panel Procurement Q1 2024",
    status: 'Open' as const,
    notes: "Coordinating with inspection team for expedited review",
    comments: "Multiple dependencies causing inspection delays",
    causes: ["late-permit-from-county", "change-order-not-approved", "missing-engineering-stamp"],
    effects: ["cod-delayed-5-days"],
    rootCause: false,
    dollarEffectPerUnit: 18000, // $18K per day of delay
    exposureUnits: 4, // 4 days delay
    exposureUnitType: "days",
    riskType: 'intermediate' as const,
    highPriority: false,
    projectType: 'Schedule',
    dollarImpact: 150000,
    impactType: 'per_day',
  },

  // FINAL IMPACT - Layer 3
  {
    id: "cod-delayed-5-days",
    description: "COD Delayed by 5 Days",
    probability: 4,
    impact: 5,
    mitigationEffectiveness: 0.2,
    owner: "Project Director",
    category: "Schedule",
    project: "Solar Panel Procurement Q1 2024",
    status: 'Open' as const,
    notes: "Assessing impact on project timeline and revenue",
    comments: "Final effect of multiple risk factors converging",
    causes: ["delayed-interconnection-approval", "delayed-final-inspection"],
    effects: [],
    rootCause: false,
    dollarEffectPerUnit: 50000, // $50K per day of revenue loss
    exposureUnits: 5, // 5 days delay
    exposureUnitType: "days",
    riskType: 'effect' as const,
    highPriority: false,
    projectType: 'Schedule',
    dollarImpact: 150000,
    impactType: 'per_day',
  },

  // Additional risks for Battery Storage Project
  {
    description: "Battery Technology Obsolescence Risk",
    probability: 2,
    impact: 4,
    mitigationEffectiveness: 0.3,
    owner: "Technical Lead",
    category: "Technology",
    project: "Battery Storage System Q2 2024",
    status: 'Open' as const,
    notes: "Monitoring latest battery technology developments",
    comments: "Battery tech evolving rapidly. Need to balance cutting-edge vs proven technology.",
    causes: [],
    effects: [],
    rootCause: true,
    dollarEffectPerUnit: 25000, // $25K per MWh capacity affected
    exposureUnits: 10, // 10 MWh capacity
    exposureUnitType: "MWh",
    riskType: 'root_cause' as const,
    highPriority: false,
    projectType: 'Schedule',
    dollarImpact: 150000,
    impactType: 'per_day',
  },
  {
    description: "Supply Chain Disruption",
    probability: 3,
    impact: 4,
    mitigationEffectiveness: 0.4,
    owner: "Supply Chain Manager",
    category: "Logistics",
    project: "Battery Storage System Q2 2024",
    status: 'In Progress' as const,
    notes: "Diversifying supplier base, securing alternative sources",
    comments: "Global supply chain issues affecting component availability",
    causes: [],
    effects: [],
    rootCause: true,
    dollarEffectPerUnit: 30000, // $30K per week of delay
    exposureUnits: 8, // 8 weeks potential delay
    exposureUnitType: "weeks",
    riskType: 'root_cause' as const,
    highPriority: false,
    projectType: 'Schedule',
    dollarImpact: 150000,
    impactType: 'per_day',
  },
  {
    description: "Regulatory Changes in Energy Storage",
    probability: 3,
    impact: 4,
    mitigationEffectiveness: 0.3,
    owner: "Compliance Officer",
    category: "Regulatory",
    project: "Battery Storage System Q2 2024",
    status: 'Open' as const,
    notes: "Monitoring regulatory developments, engaging industry associations",
    comments: "New environmental standards expected Q2. May impact component selection.",
    causes: [],
    effects: [],
    rootCause: true,
    dollarEffectPerUnit: 100000, // $100K per 10% compliance cost increase
    exposureUnits: 15, // 15% potential increase
    exposureUnitType: "% compliance cost",
    riskType: 'root_cause' as const,
    highPriority: false,
    projectType: 'Schedule',
    dollarImpact: 150000,
    impactType: 'per_day',
  },
  {
    description: "Currency Fluctuation Impact",
    probability: 4,
    impact: 3,
    mitigationEffectiveness: 0.2,
    owner: "Finance Director",
    category: "Financial",
    project: "Battery Storage System Q2 2024",
    status: 'Open' as const,
    notes: "Exploring currency hedging options",
    comments: "USD strengthening affecting procurement costs. 8% increase observed this quarter.",
    causes: [],
    effects: [],
    rootCause: true,
    dollarEffectPerUnit: 50000, // $50K per 5% currency fluctuation
    exposureUnits: 10, // 10% potential fluctuation
    exposureUnitType: "% currency impact",
    riskType: 'root_cause' as const,
    highPriority: false,
    projectType: 'Schedule',
    dollarImpact: 150000,
    impactType: 'per_day',
  }
];

export const SAMPLE_RISKS: RiskItem[] = sampleRiskData.map(data => ({
  id: data.id || generateId(),
  ...createRiskItem(data)
}));